"use strict";(self.webpackChunkpurple_sector=self.webpackChunkpurple_sector||[]).push([[449],{2154:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"dev/plot-layouts","title":"Plot Layout System","description":"This page summarizes the plot layout system used in Purple Sector for arranging telemetry charts.","source":"@site/docs/dev/plot-layouts.md","sourceDirName":"dev","slug":"/dev/plot-layouts","permalink":"/PurpleSector/dev/plot-layouts","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"userGuide","previous":{"title":"LangGraph Analyzer","permalink":"/PurpleSector/dev/langgraph-analyzer"},"next":{"title":"Design Notes","permalink":"/PurpleSector/notes/overview"}}');var t=n(4848),i=n(8453);const o={},r="Plot Layout System",a={},d=[{value:"Overview",id:"overview",level:2},{value:"Core Concepts",id:"core-concepts",level:2},{value:"Layout Structure",id:"layout-structure",level:3},{value:"Grid System",id:"grid-system",level:3},{value:"User Features",id:"user-features",level:2},{value:"Layout Persistence",id:"layout-persistence",level:2},{value:"Manage Layouts Dialog",id:"manage-layouts-dialog",level:2},{value:"Layout Status Tracking",id:"layout-status-tracking",level:2},{value:"Developer Notes",id:"developer-notes",level:2}];function c(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"plot-layout-system",children:"Plot Layout System"})}),"\n",(0,t.jsx)(s.p,{children:"This page summarizes the plot layout system used in Purple Sector for arranging telemetry charts."}),"\n",(0,t.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(s.p,{children:"The plot layout system lets users customize how telemetry plots are arranged and sized:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Split plots horizontally or vertically."}),"\n",(0,t.jsx)(s.li,{children:"Resize plots using a 12-column grid."}),"\n",(0,t.jsx)(s.li,{children:"Persist layouts in the database per context (global, session, lap)."}),"\n",(0,t.jsx)(s.li,{children:"Manage saved layouts via a dedicated dialog."}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,t.jsx)(s.h3,{id:"layout-structure",children:"Layout Structure"}),"\n",(0,t.jsx)(s.p,{children:"Layouts are stored as JSON containing:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"configs"})," \u2013 plot configurations (title, channels, axes, etc.)."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"layout"})," \u2013 grid layout information for each plot."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Example (simplified):"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "configs": [\n    {\n      "id": "plot_123",\n      "title": "Throttle & Brake",\n      "xAxis": "time",\n      "channels": ["throttle", "brake"]\n    }\n  ],\n  "layout": {\n    "cols": 12,\n    "items": [\n      {\n        "plotId": "plot_123",\n        "x": 0,\n        "y": 0,\n        "w": 6,\n        "h": 300\n      }\n    ]\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"grid-system",children:"Grid System"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"12 columns"})," \u2013 all plots use widths from 1\u201312 columns."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"x"})," / ",(0,t.jsx)(s.code,{children:"y"})," \u2013 position within the grid (row/column)."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"w"})," / ",(0,t.jsx)(s.code,{children:"h"})," \u2013 width in columns and height in pixels."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"user-features",children:"User Features"}),"\n",(0,t.jsx)(s.p,{children:"From the lap/session view, users can:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Split plots horizontally"})," \u2013 create side-by-side plots in a row."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Split plots vertically"})," \u2013 stack plots in multiple rows."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Resize plots"})," \u2013 drag handles between plots to adjust widths."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Delete plots"})," \u2013 remove unwanted plots and let the layout reflow."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Save layouts"})," \u2013 save the current configuration under a name."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Apply saved layouts"})," \u2013 load layouts per context."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Set defaults"})," \u2013 choose a default layout for global/session/lap contexts."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"layout-persistence",children:"Layout Persistence"}),"\n",(0,t.jsxs)(s.p,{children:["The persistence layer is backed by a Prisma model (e.g., ",(0,t.jsx)(s.code,{children:"SavedPlotLayout"}),") and API routes such as:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"GET /api/plot-layouts"})," \u2013 list layouts."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"POST /api/plot-layouts"})," \u2013 create a layout."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"PATCH /api/plot-layouts/[id]"})," \u2013 update a layout."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"DELETE /api/plot-layouts/[id]"})," \u2013 delete a layout."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"GET /api/plot-layouts/default"})," \u2013 get the default layout for a context."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"POST /api/plot-layouts/default"})," \u2013 set a default layout."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"manage-layouts-dialog",children:"Manage Layouts Dialog"}),"\n",(0,t.jsx)(s.p,{children:"A dedicated dialog provides batch management capabilities:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Inline editing of names and descriptions."}),"\n",(0,t.jsx)(s.li,{children:"Toggling defaults with a star icon."}),"\n",(0,t.jsx)(s.li,{children:"Marking layouts for deletion with undo."}),"\n",(0,t.jsx)(s.li,{children:"Visual indicators for default, modified, and pending delete states."}),"\n",(0,t.jsx)(s.li,{children:"Batched save of all edits in a single operation."}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"layout-status-tracking",children:"Layout Status Tracking"}),"\n",(0,t.jsx)(s.p,{children:"The telemetry panel shows the current layout status:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"Layout: <Name>"})," when a saved layout is active."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"Layout: <Name> (Modified)"})," when the current configuration differs from the saved version."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"No saved layout active"})," when using the system default."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["A menu action ",(0,t.jsx)(s.strong,{children:"Update Current Layout"}),' lets users save changes back to the currently loaded layout, clearing the "Modified" state.']}),"\n",(0,t.jsx)(s.h2,{id:"developer-notes",children:"Developer Notes"}),"\n",(0,t.jsx)(s.p,{children:"Implementation touches:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Prisma schema (",(0,t.jsx)(s.code,{children:"SavedPlotLayout"})," model) in ",(0,t.jsx)(s.code,{children:"packages/db-prisma"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["API route handlers under ",(0,t.jsx)(s.code,{children:"src/app/api/plot-layouts/*"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["Frontend components such as:","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"TelemetryPlotPanel"})," (layout controls and status)."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"SaveLayoutDialog"}),", ",(0,t.jsx)(s.code,{children:"LoadLayoutDialog"}),", ",(0,t.jsx)(s.code,{children:"ManageLayoutsDialog"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["For detailed UX flows and testing checklists, see the original plot layout docs in ",(0,t.jsx)(s.code,{children:"docs/"})," (GUIDE, SETUP, MANAGE, LAYOUT_STATUS_TRACKING); this page captures the core concepts and how they fit into the system."]})]})}function u(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>r});var l=n(6540);const t={},i=l.createContext(t);function o(e){const s=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),l.createElement(i.Provider,{value:s},e.children)}}}]);