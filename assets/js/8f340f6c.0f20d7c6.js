"use strict";(self.webpackChunkpurple_sector=self.webpackChunkpurple_sector||[]).push([[995],{6474:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"user/troubleshooting","title":"Troubleshooting","description":"Common issues and quick fixes when running Purple Sector.","source":"@site/docs/user/troubleshooting.md","sourceDirName":"user","slug":"/user/troubleshooting","permalink":"/PurpleSector/user/troubleshooting","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"userGuide","previous":{"title":"Plugins","permalink":"/PurpleSector/user/plugins"},"next":{"title":"Running the Stack","permalink":"/PurpleSector/ops/running-stack"}}');var i=s(4848),l=s(8453);const o={},c="Troubleshooting",t={},d=[{value:"App Won&#39;t Load / Spinner Hangs",id:"app-wont-load--spinner-hangs",level:2},{value:"Login Issues",id:"login-issues",level:2},{value:"No Telemetry Data Received",id:"no-telemetry-data-received",level:2},{value:"Assetto Corsa",id:"assetto-corsa",level:3},{value:"Assetto Corsa Competizione (ACC)",id:"assetto-corsa-competizione-acc",level:3},{value:"Demo Collector",id:"demo-collector",level:3},{value:"Kafka Pipeline Issues",id:"kafka-pipeline-issues",level:2},{value:"Services Keep Crashing",id:"services-keep-crashing",level:3},{value:"Database Consumer Errors",id:"database-consumer-errors",level:3},{value:"AI Agent Not Working",id:"ai-agent-not-working",level:2},{value:"Events Tree Shows &quot;Loading Events...&quot; Forever",id:"events-tree-shows-loading-events-forever",level:2},{value:"Plots Not Rendering",id:"plots-not-rendering",level:2},{value:"General Tips",id:"general-tips",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"troubleshooting",children:"Troubleshooting"})}),"\n",(0,i.jsx)(n.p,{children:"Common issues and quick fixes when running Purple Sector."}),"\n",(0,i.jsx)(n.h2,{id:"app-wont-load--spinner-hangs",children:"App Won't Load / Spinner Hangs"}),"\n",(0,i.jsx)(n.p,{children:"If the app shows a loading spinner that never resolves:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Wait a moment"})," \u2014 On first load in dev mode, the Next.js server compiles pages on demand. This can take 10\u201330 seconds."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Reload the page"})," \u2014 If the spinner persists for more than 30 seconds, try a hard reload (Ctrl+Shift+R)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check the dev server"})," \u2014 Verify the Next.js server is running:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx pm2 status\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check for port conflicts"})," \u2014 Ensure port 3000 is not in use by another process."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Clear the Next.js cache"})," \u2014 Sometimes a stale cache causes issues:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"rm -rf .next/\nnpm run dev\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"login-issues",children:"Login Issues"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The dev environment uses stub authentication. Valid usernames are ",(0,i.jsx)(n.code,{children:"admin"})," and ",(0,i.jsx)(n.code,{children:"user"})," (no password)."]}),"\n",(0,i.jsxs)(n.li,{children:["If you are redirected to ",(0,i.jsx)(n.code,{children:"/login"})," repeatedly, check that cookies are enabled in your browser."]}),"\n",(0,i.jsxs)(n.li,{children:["Clear cookies for ",(0,i.jsx)(n.code,{children:"localhost"})," if you encounter stale auth state."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"no-telemetry-data-received",children:"No Telemetry Data Received"}),"\n",(0,i.jsx)(n.h3,{id:"assetto-corsa",children:"Assetto Corsa"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verify Assetto Corsa is running and you are on track (not in the menu)."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Check ",(0,i.jsx)(n.code,{children:"telemetry.ini"})," configuration in ",(0,i.jsx)(n.code,{children:"Documents/Assetto Corsa/cfg/"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",children:"[TELEMETRY]\nENABLED=1\nUDP_PORT=9996\nUDP_ADDRESS=127.0.0.1\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Ensure UDP port ",(0,i.jsx)(n.code,{children:"9996"})," is not blocked by a firewall."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verify the telemetry collector service is running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx pm2 logs demo-collector-dev\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"assetto-corsa-competizione-acc",children:"Assetto Corsa Competizione (ACC)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verify ACC is running and you are in a session (not just at the main menu)."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Check ",(0,i.jsx)(n.code,{children:"broadcasting.json"})," in ",(0,i.jsx)(n.code,{children:"Documents/Assetto Corsa Competizione/Config/"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "updListenerPort": 9000,\n  "connectionPassword": "",\n  "commandPassword": ""\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Ensure UDP port ",(0,i.jsx)(n.code,{children:"9000"})," is not blocked by a firewall."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'Check that the collector successfully registered with ACC (look for a "Successfully registered" message in the collector logs).'}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"demo-collector",children:"Demo Collector"}),"\n",(0,i.jsx)(n.p,{children:"If using the demo collector and no data appears:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verify the collector is running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx pm2 status\nnpx pm2 logs demo-collector-dev\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verify Kafka is running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker ps | grep kafka\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verify the Kafka\u2013WebSocket bridge is running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx pm2 logs kafka-bridge-dev\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"kafka-pipeline-issues",children:"Kafka Pipeline Issues"}),"\n",(0,i.jsx)(n.h3,{id:"services-keep-crashing",children:"Services Keep Crashing"}),"\n",(0,i.jsx)(n.p,{children:"Check PM2 logs for the specific service:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx pm2 logs kafka-bridge-dev\nnpx pm2 logs kafka-db-consumer-dev\nnpx pm2 logs demo-collector-dev\n"})}),"\n",(0,i.jsx)(n.p,{children:"Common causes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Kafka not running or not ready yet (wait 30 seconds after starting Docker)."}),"\n",(0,i.jsxs)(n.li,{children:["Topics not created \u2014 run ",(0,i.jsx)(n.code,{children:"npm run kafka:setup"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Port conflicts."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"database-consumer-errors",children:"Database Consumer Errors"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"kafka-db-consumer-dev"})," service may error if:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The database file is locked (another process has it open)."}),"\n",(0,i.jsxs)(n.li,{children:["The schema is out of date \u2014 run ",(0,i.jsx)(n.code,{children:"npm run db:push"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The database file is corrupted \u2014 reset with ",(0,i.jsx)(n.code,{children:"npm run db:reset"})," (destructive)."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"ai-agent-not-working",children:"AI Agent Not Working"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Confirm ",(0,i.jsx)(n.code,{children:"OPENAI_API_KEY"})," is set in ",(0,i.jsx)(n.code,{children:".env.local"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Check your OpenAI API quota and billing."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Review the Next.js server logs for API errors:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx pm2 logs nextjs-dev\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"If the agent panel shows an error, try starting a new conversation."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"events-tree-shows-loading-events-forever",children:'Events Tree Shows "Loading Events..." Forever'}),"\n",(0,i.jsx)(n.p,{children:"This can happen if:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"The Next.js API server is still compiling routes on first load \u2014 wait a few seconds and it should resolve."}),"\n",(0,i.jsxs)(n.li,{children:["The database is empty or inaccessible \u2014 check ",(0,i.jsx)(n.code,{children:"DATABASE_URL"})," in ",(0,i.jsx)(n.code,{children:".env.local"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"The auth cookie is missing or invalid \u2014 log out and log back in."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"plots-not-rendering",children:"Plots Not Rendering"}),"\n",(0,i.jsx)(n.p,{children:"If telemetry plots show as blank boxes:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Verify the lap has telemetry data (check the session detail view for lap times)."}),"\n",(0,i.jsx)(n.li,{children:"Try toggling fullscreen on the panel and back."}),"\n",(0,i.jsx)(n.li,{children:"Check the browser console for JavaScript errors."}),"\n",(0,i.jsx)(n.li,{children:"Clear the Next.js cache and reload."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"general-tips",children:"General Tips"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check PM2 status"})," \u2014 ",(0,i.jsx)(n.code,{children:"npx pm2 status"})," shows all running services and their state."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check PM2 logs"})," \u2014 ",(0,i.jsx)(n.code,{children:"npx pm2 logs"})," shows combined logs from all services."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Reset everything"})," \u2014 For a clean start:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run dev:stop-all\nrm -rf .next/\nnpm run db:reset\nnpm run dev:start\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Browser console"})," \u2014 Open DevTools (F12) and check the Console tab for client-side errors."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If issues persist, file an issue on GitHub with logs and steps to reproduce."})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var r=s(6540);const i={},l=r.createContext(i);function o(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);